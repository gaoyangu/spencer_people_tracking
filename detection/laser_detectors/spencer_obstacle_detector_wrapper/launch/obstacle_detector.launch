<!-- Launches the leg detector from wg-perception (needs to be installed separately) -->
<launch>
    <arg name="detected_persons" default="detected_persons"/>   <!-- output topic -->
    <arg name="node_prefix" default="obstacle_detector"/>            <!-- prefix for node names -->
 
    <arg name="detection_id_offset" default="0"/>
    <arg name="detection_id_increment" default="1"/>
    <arg name="cov_scale" default="0.01"/>


    <group ns="$(arg node_prefix)" >
        <include file="$(find obstacle_detector)/launch/obstacle_detector.launch"/>

        <node name="converter_array" pkg="obstacle_detector" type="obstacles_to_pose_array.py" output="screen"/>

        <node name="converter" pkg="spencer_detected_person_conversion" type="pose_array_to_detected_persons.py" output="screen">
            <param name="detection_id_offset" value="$(arg detection_id_offset)"/>
            <param name="detection_id_increment" value="$(arg detection_id_increment)"/>
            <param name="use_object_id" value="false"/>
            <param name="cov_scale" value="$(arg cov_scale)"/>

            <!-- FIXME: I believe the target topic should be people_tracker_measurements (=fused), otherwise we get one
                 detection per single leg, leading to duplicate person tracks. Couldn't test this on SPENCER data, as our
                 sensor is mounted too high to discriminate between two legs of a person. -->
        </node>
    </group>
        
</launch>
